#------------------------------------------------------------
#        Script MySQL.
#------------------------------------------------------------


#------------------------------------------------------------
# Table: Joueur
#------------------------------------------------------------

CREATE TABLE Joueur(
        pseudo_J         Varchar (20) NOT NULL ,
        mdp_J            Varchar (25) NOT NULL ,
        seriousflouz     Int ,
        nb_Vote          Int ,
        nb_PointBoutique Int ,
        nom_Faction      Varchar (25) NOT NULL ,
        PRIMARY KEY (pseudo_J )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: Faction
#------------------------------------------------------------

CREATE TABLE Faction(
        nom_Faction         Varchar (25) NOT NULL ,
        description_Faction Longtext ,
        PRIMARY KEY (nom_Faction )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: Grade
#------------------------------------------------------------

CREATE TABLE Grade(
        id_Grade          int (11) Auto_increment  NOT NULL ,
        nom_Grade         Varchar (25) ,
        prix_Grade        Int ,
        description_Grade Longtext ,
        PRIMARY KEY (id_Grade )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: Objet
#------------------------------------------------------------

CREATE TABLE Objet(
        id_Objet          int (11) Auto_increment  NOT NULL ,
        nom_Objet         Varchar (25) ,
        prix_Objet        Int ,
        description_Objet Longtext ,
        PRIMARY KEY (id_Objet )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: Evenement
#------------------------------------------------------------

CREATE TABLE Evenement(
        id_Evenement           int (11) Auto_increment  NOT NULL ,
        nom_Evenement          Varchar (25) ,
        dateCreation_Evenement Date ,
        dateDeb_Evenement      Date ,
        dateFin_Evenement      Date ,
        description_Evenement  Longtext ,
        pseudo_J               Varchar (20) NOT NULL ,
        PRIMARY KEY (id_Evenement )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: Serveur
#------------------------------------------------------------

CREATE TABLE Serveur(
        id_Serveur          int (11) Auto_increment  NOT NULL ,
        nom_Serveur         Varchar (25) ,
        description_Serveur Longtext ,
        PRIMARY KEY (id_Serveur )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: ennemi
#------------------------------------------------------------

CREATE TABLE ennemi(
        nom_Faction   Varchar (25) NOT NULL ,
        nom_Faction_1 Varchar (25) NOT NULL ,
        PRIMARY KEY (nom_Faction ,nom_Faction_1 )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: allie
#------------------------------------------------------------

CREATE TABLE allie(
        nom_Faction   Varchar (25) NOT NULL ,
        nom_Faction_1 Varchar (25) NOT NULL ,
        PRIMARY KEY (nom_Faction ,nom_Faction_1 )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: promouvoir
#------------------------------------------------------------

CREATE TABLE promouvoir(
        pseudo_J Varchar (20) NOT NULL ,
        id_Grade Int NOT NULL ,
        PRIMARY KEY (pseudo_J ,id_Grade )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: inclus
#------------------------------------------------------------

CREATE TABLE inclus(
        id_Objet Int NOT NULL ,
        id_Grade Int NOT NULL ,
        PRIMARY KEY (id_Objet ,id_Grade )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: acheter
#------------------------------------------------------------

CREATE TABLE acheter(
        id_Objet Int NOT NULL ,
        pseudo_J Varchar (20) NOT NULL ,
        PRIMARY KEY (id_Objet ,pseudo_J )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: appartenir
#------------------------------------------------------------

CREATE TABLE appartenir(
        pseudo_J   Varchar (20) NOT NULL ,
        id_Serveur Int NOT NULL ,
        PRIMARY KEY (pseudo_J ,id_Serveur )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: participe
#------------------------------------------------------------

CREATE TABLE participe(
        id_Evenement Int NOT NULL ,
        pseudo_J     Varchar (20) NOT NULL ,
        PRIMARY KEY (id_Evenement ,pseudo_J )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: voter
#------------------------------------------------------------

CREATE TABLE voter(
        id_Evenement Int NOT NULL ,
        pseudo_J     Varchar (20) NOT NULL ,
        PRIMARY KEY (id_Evenement ,pseudo_J )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: recompenser
#------------------------------------------------------------

CREATE TABLE recompenser(
        id_Objet     Int NOT NULL ,
        id_Evenement Int NOT NULL ,
        pseudo_J     Varchar (20) NOT NULL ,
        PRIMARY KEY (id_Objet ,id_Evenement ,pseudo_J )
)ENGINE=InnoDB;


#------------------------------------------------------------
# Table: concourir
#------------------------------------------------------------

CREATE TABLE concourir(
        nom_Faction  Varchar (25) NOT NULL ,
        id_Evenement Int NOT NULL ,
        PRIMARY KEY (nom_Faction ,id_Evenement )
)ENGINE=InnoDB;

ALTER TABLE Joueur ADD CONSTRAINT FK_Joueur_nom_Faction FOREIGN KEY (nom_Faction) REFERENCES Faction(nom_Faction);
ALTER TABLE Evenement ADD CONSTRAINT FK_Evenement_pseudo_J FOREIGN KEY (pseudo_J) REFERENCES Joueur(pseudo_J);
ALTER TABLE ennemi ADD CONSTRAINT FK_ennemi_nom_Faction FOREIGN KEY (nom_Faction) REFERENCES Faction(nom_Faction);
ALTER TABLE ennemi ADD CONSTRAINT FK_ennemi_nom_Faction_1 FOREIGN KEY (nom_Faction_1) REFERENCES Faction(nom_Faction);
ALTER TABLE allie ADD CONSTRAINT FK_allie_nom_Faction FOREIGN KEY (nom_Faction) REFERENCES Faction(nom_Faction);
ALTER TABLE allie ADD CONSTRAINT FK_allie_nom_Faction_1 FOREIGN KEY (nom_Faction_1) REFERENCES Faction(nom_Faction);
ALTER TABLE promouvoir ADD CONSTRAINT FK_promouvoir_pseudo_J FOREIGN KEY (pseudo_J) REFERENCES Joueur(pseudo_J);
ALTER TABLE promouvoir ADD CONSTRAINT FK_promouvoir_id_Grade FOREIGN KEY (id_Grade) REFERENCES Grade(id_Grade);
ALTER TABLE inclus ADD CONSTRAINT FK_inclus_id_Objet FOREIGN KEY (id_Objet) REFERENCES Objet(id_Objet);
ALTER TABLE inclus ADD CONSTRAINT FK_inclus_id_Grade FOREIGN KEY (id_Grade) REFERENCES Grade(id_Grade);
ALTER TABLE acheter ADD CONSTRAINT FK_acheter_id_Objet FOREIGN KEY (id_Objet) REFERENCES Objet(id_Objet);
ALTER TABLE acheter ADD CONSTRAINT FK_acheter_pseudo_J FOREIGN KEY (pseudo_J) REFERENCES Joueur(pseudo_J);
ALTER TABLE appartenir ADD CONSTRAINT FK_appartenir_pseudo_J FOREIGN KEY (pseudo_J) REFERENCES Joueur(pseudo_J);
ALTER TABLE appartenir ADD CONSTRAINT FK_appartenir_id_Serveur FOREIGN KEY (id_Serveur) REFERENCES Serveur(id_Serveur);
ALTER TABLE participe ADD CONSTRAINT FK_participe_id_Evenement FOREIGN KEY (id_Evenement) REFERENCES Evenement(id_Evenement);
ALTER TABLE participe ADD CONSTRAINT FK_participe_pseudo_J FOREIGN KEY (pseudo_J) REFERENCES Joueur(pseudo_J);
ALTER TABLE voter ADD CONSTRAINT FK_voter_id_Evenement FOREIGN KEY (id_Evenement) REFERENCES Evenement(id_Evenement);
ALTER TABLE voter ADD CONSTRAINT FK_voter_pseudo_J FOREIGN KEY (pseudo_J) REFERENCES Joueur(pseudo_J);
ALTER TABLE recompenser ADD CONSTRAINT FK_recompenser_id_Objet FOREIGN KEY (id_Objet) REFERENCES Objet(id_Objet);
ALTER TABLE recompenser ADD CONSTRAINT FK_recompenser_id_Evenement FOREIGN KEY (id_Evenement) REFERENCES Evenement(id_Evenement);
ALTER TABLE recompenser ADD CONSTRAINT FK_recompenser_pseudo_J FOREIGN KEY (pseudo_J) REFERENCES Joueur(pseudo_J);
ALTER TABLE concourir ADD CONSTRAINT FK_concourir_nom_Faction FOREIGN KEY (nom_Faction) REFERENCES Faction(nom_Faction);
ALTER TABLE concourir ADD CONSTRAINT FK_concourir_id_Evenement FOREIGN KEY (id_Evenement) REFERENCES Evenement(id_Evenement);
